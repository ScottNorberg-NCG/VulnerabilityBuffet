
@{
    ViewData["Title"] = "Int In Cookie";
}
@model AccountUserViewModel

<h1>@ViewData["Title"]</h1>
<partial name="_Menu" />
<div class="attack-page-content">
    <p>The search on the page is not vulnerable to SQL injection attacks, but the search value is saved in a cookie for the next time you request the page, and that query is vulnerable.</p>
    @using (Html.BeginForm())
    {
        <div>
            <label for="foodGroupId">Get all foods for food group:</label>
            <select id="foodGroupId" name="foodGroupId">
                @foreach (SearchItemViewModel item in ViewBag.AvailableValues)
                {
                    if (item.IsSelected)
                    {
                        <option value="@item.Value" selected="selected">@item.Text</option>
                    }
                    else
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                }
            </select>
        </div>
        <button type="submit">Search</button>
    }
    <h2>You searched for ID: @Model.SearchText</h2>
    <table width="100%">
        <tr><th>ID</th><th>Food Name</th><th>Food Group</th><th>Calories</th><th>Protein</th><th>Fat</th><th>Carbohydrates</th></tr>
        @foreach (var food in Model.Foods)
        {
            <tr>
                <td>@food.FoodID</td>
                <td>@food.FoodName</td>
                <td>@food.FoodGroup</td>
                <td>@food.Calories</td>
                <td>@food.Protein</td>
                <td>@food.Fat</td>
                <td>@food.Carbohydrates</td>
            </tr>
        }
    </table>
</div>
